(this["webpackJsonpclass-engagement"]=this["webpackJsonpclass-engagement"]||[]).push([[0],[,,,,,,,,function(e,t,n){var c=n(23),i=["loadModel","disposeModel","predict"];e.exports=function(){var e=new Worker(n.p+"b7c23e5e2735ef8c4e33.worker.js",{name:"[hash].worker.js"});return c(e,i),e}},,,,,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,function(e,t,n){"use strict";n.r(t);var c=n(1),i=n.n(c),r=n(6),a=n.n(r),s=(n(13),n(2)),o=n(3),d=n.n(o),u=n(5),l=n(7),j=n.n(l),b=(n(15),n(0)),v=function(e){var t=e.additionalClassname,n=e.children,c="blur-container";return t&&(c+=" ".concat(t)),Object(b.jsx)("div",{className:c,children:n})},f=(n(17),function(e){var t=e.onClick,n=e.setHover,c=e.children;return Object(b.jsx)("div",{onClick:t?function(){return t()}:void 0,onMouseEnter:n?function(){return n(!0)}:void 0,onMouseLeave:n?function(){return n(!1)}:void 0,children:Object(b.jsx)(v,{additionalClassname:"square-button",children:c})})}),m=n.p+"static/media/check.06c31cf8.svg",O=n.p+"static/media/no-check.fe894ae6.svg";n(18);var g=function(e){var t=e.selected,n=e.onSelect,c=e.name;return Object(b.jsxs)("div",{className:"source-item-container",children:[Object(b.jsx)("div",{className:"source-device".concat(t?" source-selected":""),children:c}),Object(b.jsx)("div",{onClick:function(){return n()},className:"source-radio-button",children:Object(b.jsx)("img",{src:t?m:O,alt:"Select device"})})]},c)},p=n.p+"static/media/gear.b1f1407e.svg";n(19);var h=function(e){var t=e.devices,n=e.deviceId,i=e.setDeviceId,r=e.imageFlip,a=e.setImageFlip,o=e.selectorVisible,d=e.setSelectorVisible,u=Object(c.useState)(!1),l=Object(s.a)(u,2),j=l[0],h=l[1];return Object(b.jsxs)("div",{id:"camera-select-button",onClick:function(e){return e.stopPropagation()},onMouseLeave:function(){d(!1)},children:[Object(b.jsx)(f,{setHover:function(e){h(e),e&&d(!0)},children:Object(b.jsx)("img",{id:"gear-icon",src:p,alt:"Gear Icon",className:o||j?"gear-rotated":void 0})}),Object(b.jsxs)(v,{additionalClassname:"source-selector".concat(o?" source-expanded":""),children:[t.map((function(e,t){return Object(b.jsx)(g,{name:e.label||"Device ".concat(t+1),onSelect:function(){return i(e.deviceId)},selected:e.deviceId===n},e.deviceId)})),Object(b.jsx)("div",{className:"toggle-container",children:Object(b.jsxs)("div",{className:"toggle-item-container",children:[Object(b.jsx)("div",{className:"toggle-item source-device".concat(r?" source-selected":""),children:"Flip Image"}),Object(b.jsx)("div",{onClick:function(){return a(!r)},className:"toggle-radio-button",children:Object(b.jsx)("img",{src:r?m:O,alt:"Flip Webcam Button"})})]})})]})]})};n(20);var x=function(e){var t=e.predictCanvas,n=e.predictions,i=Object(c.useState)([]),r=Object(s.a)(i,2),a=r[0],o=r[1],l=Object(c.useState)(void 0),v=Object(s.a)(l,2),f=v[0],m=v[1],O=Object(c.useState)(!0),g=Object(s.a)(O,2),p=g[0],x=g[1],k=Object(c.useRef)(null),C=Object(c.useState)(!1),S=Object(s.a)(C,2),I=S[0],w=S[1],F=Object(c.useCallback)((function(e){var t=e.filter((function(e){return"videoinput"===e.kind}));o(t),t.length>0&&m(t[0].deviceId)}),[o,m]);Object(c.useEffect)((function(){navigator.mediaDevices.enumerateDevices().then(F)}),[F]);var N=Object(c.useCallback)(Object(u.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!k.current){e.next=4;break}if(!(t=k.current.getCanvas())){e.next=4;break}return e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)}))),[k]),D=Object(c.useCallback)((function(e){return new Promise((function(t,n){setTimeout(t,e)}))}),[]);return Object(c.useEffect)((function(){N().then(function(){var e=Object(u.a)(d.a.mark((function e(n){var c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=n;case 1:if(c){e.next=9;break}return e.next=4,D(500);case 4:return e.next=6,N();case 6:c=e.sent,e.next=1;break;case 9:c&&t(c);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[D,n,f,N,t]),Object(b.jsxs)("div",{id:"video-container",onClick:function(){return w(!1)},children:[Object(b.jsx)(h,{devices:a,deviceId:f,setDeviceId:m,imageFlip:p,setImageFlip:x,selectorVisible:I,setSelectorVisible:w}),Object(b.jsx)(j.a,{ref:k,screenshotFormat:"image/jpeg",forceScreenshotSourceSize:!0,screenshotQuality:1,audio:!1,videoConstraints:f?{deviceId:f}:{},mirrored:p})]})};n(21);var k=function(e){var t=e.label,n=e.confidence,c=e.top;return Object(b.jsxs)("div",{className:"prediction-entry",children:[t,n?Object(b.jsx)("div",{className:"prediction-bar"+(c?" prediction-green":""),style:{width:(100*n).toString()+"%"}}):null]},t)};n(22);var C=function(e){var t,n=e.predictions,c=e.top,i=void 0===c?3:c;return n&&(t=Object.entries(n).sort((function(e,t){return t[1]-e[1]})).slice(0,i)),Object(b.jsx)("div",{id:"predictions",children:Object(b.jsx)(v,{children:t?t.map((function(e,t){var n=Object(s.a)(e,2),c=n[0],i=n[1];return Object(b.jsx)(k,{label:c,confidence:i,top:0===t},c)})):Object(b.jsx)(k,{label:"Loading..."})})})},S=n(8),I=n.n(S)()();I.loadModel("/class-engagement/model/signature.json","/class-engagement/model/model.json");var w=function(){var e=Object(c.useState)(void 0),t=Object(s.a)(e,2),n=t[0],i=t[1],r=Object(c.useCallback)((function(e){var t=e.getContext("2d");if(t){var n=t.getImageData(0,0,e.width,e.height);I.predict(n).then((function(e){e&&i(e.Confidences)}))}}),[]);return Object(b.jsxs)("div",{children:[Object(b.jsx)(x,{predictCanvas:r,predictions:n}),Object(b.jsx)(C,{predictions:n})]})},F=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,25)).then((function(t){var n=t.getCLS,c=t.getFID,i=t.getFCP,r=t.getLCP,a=t.getTTFB;n(e),c(e),i(e),r(e),a(e)}))};a.a.render(Object(b.jsx)(i.a.StrictMode,{children:Object(b.jsx)(w,{})}),document.getElementById("root")),F()}],[[24,1,2]]]);
//# sourceMappingURL=main.1a9bcec0.chunk.js.map